(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d210bd0"],{b8bf:function(t,e,n){"use strict";n.r(e);var c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"mb-base",staticStyle:{display:"flex","justify-content":"space-between","align-items":"center"}},[n("h3",[t._v("Секции")]),n("vs-button",{attrs:{color:"primary","icon-pack":"feather",icon:"icon-plus"},on:{click:function(e){t.isPrompt=!0}}},[t._v("Создать секцию")])],1),n("div",{staticClass:"vx-row"},t._l(t.$store.state.sections.list,function(e){return n("div",{staticClass:"vx-col w-full lg:w-1/3 md:w-1/2 mb-2"},[n("vs-card",{attrs:{actionable:""}},[n("div",{staticStyle:{display:"flex","justify-content":"space-between"},on:{click:function(n){return t.open(e.id)}}},[n("div",{staticClass:"p-2",staticStyle:{display:"flex","align-items":"center","white-space":"nowrap",overflow:"hidden"}},[n("feather-icon",{staticClass:"mr-4",attrs:{icon:"GridIcon"}}),n("div",{attrs:{title:"ghhhffhf fhfhfhfh fhfhfhfhhf ghvhner 1"}},[n("h5",{staticClass:"mb-1"},[t._v(t._s(e.name))]),t._v("\n                            Кол-во модулей: "+t._s(e.modules_count)+" шт.\n                        ")])],1),n("div",{staticClass:"p-2",staticStyle:{display:"flex","align-items":"center"}},[n("vs-button",{staticClass:"mx-2",attrs:{size:"small",color:"primary",type:"border","icon-pack":"feather",icon:"icon-edit-2"},on:{click:function(n){return n.preventDefault(),n.stopPropagation(),t.edit(e)}}}),n("vs-button",{attrs:{size:"small",color:"danger",type:"border","icon-pack":"feather",icon:"icon-trash-2"},on:{click:function(n){return n.preventDefault(),n.stopPropagation(),t.remove(e)}}})],1)])])],1)}),0),n("vs-prompt",{attrs:{title:t.current.id?"Редакировать секцию":"Новая секция","accept-text":"Сохранить","cancel-text":"Отменить",active:t.isPrompt},on:{cancel:t.cancel,accept:t.save,close:t.cancel,"update:active":function(e){t.isPrompt=e}}},[n("div",{staticClass:"con-exemple-prompt"},[n("span",[t._v("Введите название секции")]),n("vs-input",{staticClass:"mt-3 w-full",attrs:{placeholder:"Группа 1","vs-placeholder":"Группа 1"},model:{value:t.current.name,callback:function(e){t.$set(t.current,"name",e)},expression:"current.name"}})],1)])],1)},i=[],s=(n("7f7f"),n("96cf"),n("3b8d")),r={data:function(){return{isPrompt:!1,current:{id:null,name:""}}},created:function(){this.getList()},mounted:function(){var t=this;this.$io.on("model:update:sections",function(){t.getList()})},beforeDestroy:function(){var t=this;this.$io.on("model:update:sections",function(){t.getList()})},methods:{getList:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$http.get("/sections");case 3:e=t.sent,this.$store.commit("sections/setList",e.data),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),this.$vs.dialog({type:"confirm",color:"warning",title:"Ошибка",text:"Не удалось получить данные, повторите попытку",accept:this.getList,acceptText:"Повторить",cancelText:"Отменить"});case 10:case"end":return t.stop()}},t,this,[[0,7]])}));function e(){return t.apply(this,arguments)}return e}(),open:function(t){this.$router.push("/sections/"+t)},edit:function(t){this.current={id:t.id,name:t.name},this.isPrompt=!0},remove:function(t){this.current={id:t.id,name:t.name},this.$vs.dialog({type:"confirm",color:"danger",title:"Подтвердите действие",text:"Внимание! При удалении секции все модули, привязанные к ней, будут удалены. Данное действие невозможно отменить!",accept:this.delete,cancel:this.cancel,acceptText:"Удалить",cancelText:"Отменить"})},cancel:function(){this.isPrompt=!1,this.current={id:null,name:""}},save:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!this.current.id){t.next=6;break}return t.next=4,this.$http.post("/sections/"+this.current.id,{name:this.current.name});case 4:t.next=8;break;case 6:return t.next=8,this.$http.post("/sections",{name:this.current.name});case 8:this.$vs.notify({color:"success",title:"Успешно",text:"Данные сохранены"}),this.cancel(),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](0),this.$vs.dialog({type:"confirm",color:"warning",title:"Ошибка",text:"Не удалось сохранить данные, повторите попытку",accept:this.save,acceptText:"Повторить",cancelText:"Отменить"});case 15:case"end":return t.stop()}},t,this,[[0,12]])}));function e(){return t.apply(this,arguments)}return e}(),delete:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$http.delete("/sections/"+this.current.id);case 3:this.$vs.notify({color:"success",title:"Успешно",text:"Запись удалена"}),this.cancel(),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),this.$vs.dialog({type:"confirm",color:"warning",title:"Ошибка",text:"Не удалось сохранить данные, повторите попытку",accept:this.delete,acceptText:"Повторить",cancelText:"Отменить"});case 10:case"end":return t.stop()}},t,this,[[0,7]])}));function e(){return t.apply(this,arguments)}return e}()}},a=r,o=n("2877"),l=Object(o["a"])(a,c,i,!1,null,null,null);e["default"]=l.exports}}]);
//# sourceMappingURL=chunk-2d210bd0.778c7003.js.map